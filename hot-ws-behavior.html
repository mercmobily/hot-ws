<link rel="import" href="../polymer/polymer.html">

<!--

Small behaviour for Polymer elements that will ensure that they are registered for


-->

<script>

if( typeof Hotplate == 'undefined' ) Hotplate = {};
Hotplate.HotWsBehavior = {

  properties: {

    wsData: {
      type: Object,
      value: Hotplate.cometClient.data,
      readOnly: true,
    },

    wsMethods: {
      type: Object,
      value: Hotplate.cometClient,
      readOnly: true,
    },

    ajaxElementId: {
      type: String
    },

  },


  wsReset: function(){
    var aj = this.$[ this.ajaxElementId ];
    if( aj ){
      aj.generateRequest();
    }
  },

  // Function to be overridden by element to receive messages
  wsMessage: function( message ){
  },

  /* Methods wrapping */

  wsSendLocal: function( message ){
    if( this.wsMethods ) this.wsMethods.sendLocal( message );
  },

  wsSendWs: function( message ){
    if( this.wsMethods ) this.wsMethods.sendWs( message );
  },

  /* Adding element that implements the behaviour to the list of subscrinbers automatically*/

  attached: function() {
    this.wsMethods.addSubscriber( this );
  },
  detached: function() {
    this.wsMethods.deleteSubscriber( this );
  },


};

</script>
